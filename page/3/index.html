<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>Dachmx Web Log</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="keywords" content="blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Dachmx Web Log">
<meta property="og:url" content="http://dachmx.github.io/page/3/index.html">
<meta property="og:site_name" content="Dachmx Web Log">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Dachmx Web Log">
  
    <link rel="alternate" href="/atom.xml" title="Dachmx Web Log" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Dachmx Web Log</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">just record and just share</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://dachmx.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-android/analysisonbinderofandroid" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/09/android/analysisonbinderofandroid/" class="article-date">
  <time datetime="2015-10-08T16:00:00.000Z" itemprop="datePublished">2015-10-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/09/android/analysisonbinderofandroid/">Analysis on IBinder for Android</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="current-situation"><a href="#current-situation" class="headerlink" title="current situation"></a>current situation</h2><h3 id="Desc-of-IBinder"><a href="#Desc-of-IBinder" class="headerlink" title="Desc of IBinder"></a>Desc of IBinder</h3><pre><code>Base interface for a remotable object, the core part of a lightweight remote procedure call mechanism designed for high performance when performing in-process and cross-process calls. This interface describes the abstract protocol for interacting with a remotable object. Do not implement this interface directly, instead extend from Binder.

The key IBinder API is transact() matched by Binder.onTransact(). These methods allow you to send a call to an IBinder object and receive a call coming in to a Binder object, respectively. This transaction API is synchronous, such that a call to transact() does not return until the target has returned from Binder.onTransact(); this is the expected behavior when calling an object that exists in the local process, and the underlying inter-process communication (IPC) mechanism ensures that these same semantics apply when going across processes.
</code></pre><p>The data sent through transact() is a Parcel, a generic buffer of data that also maintains some meta-data about its contents. The meta data is used to manage IBinder object references in the buffer, so that those references can be maintained as the buffer moves across processes. This mechanism ensures that when an IBinder is written into a Parcel and sent to another process, if that other process sends a reference to that same IBinder back to the original process, then the original process will receive the same IBinder object back. These semantics allow IBinder/Binder objects to be used as a unique identity (to serve as a token or for other purposes) that can be managed across processes.</p>
<p>The system maintains a pool of transaction threads in each process that it runs in. These threads are used to dispatch all IPCs coming in from other processes. For example, when an IPC is made from process A to process B, the calling thread in A blocks in transact() as it sends the transaction to process B. The next available pool thread in B receives the incoming transaction, calls Binder.onTransact() on the target object, and replies with the result Parcel. Upon receiving its result, the thread in process A returns to allow its execution to continue. In effect, other processes appear to use as additional threads that you did not create executing in your own process.</p>
<p>The Binder system also supports recursion across processes. For example if process A performs a transaction to process B, and process B while handling that transaction calls transact() on an IBinder that is implemented in A, then the thread in A that is currently waiting for the original transaction to finish will take care of calling Binder.onTransact() on the object being called by B. This ensures that the recursion semantics when calling remote binder object are the same as when calling local objects.</p>
<h2 id="Analysis-of-IBinder"><a href="#Analysis-of-IBinder" class="headerlink" title="Analysis of IBinder"></a>Analysis of IBinder</h2><h3 id="Source-of-IBinder"><a href="#Source-of-IBinder" class="headerlink" title="Source of IBinder"></a>Source of IBinder</h3><p><a href="http://code.metager.de/source/xref/android/2.0.1/frameworks/base/core/java/android/os/IBinder.java" target="_blank" rel="noopener">IBinder</a> is a interface is not a Controller or a type of View.</p>
<p>It has som abstract methods like dump, transact etc. as follows:</p>
<ul>
<li>abstract void    dump(FileDescriptor fd, String[] args)<br>Print the object’s state into the given stream.</li>
<li>abstract void    dumpAsync(FileDescriptor fd, String[] args)<br>Like dump(FileDescriptor, String[]) but always executes asynchronously.</li>
<li>abstract String    getInterfaceDescriptor()<br>Get the canonical name of the interface supported by this binder.</li>
<li>abstract boolean    isBinderAlive()<br>Check to see if the process that the binder is in is still alive.</li>
<li>abstract void    linkToDeath(IBinder.DeathRecipient recipient, int flags)<br>Register the recipient for a notification if this binder goes away.</li>
<li>abstract boolean    pingBinder()<br>Check to see if the object still exists.</li>
<li>abstract IInterface    queryLocalInterface(String descriptor)<br>Attempt to retrieve a local implementation of an interface for this Binder object.</li>
<li>abstract boolean    transact(int code, Parcel data, Parcel reply, int flags)<br>Perform a generic operation with the object.</li>
<li>abstract boolean    unlinkToDeath(IBinder.DeathRecipient recipient, int flags)<br>Remove a previously registered death notification.</li>
</ul>
<h3 id="Implementation-of-IPC"><a href="#Implementation-of-IPC" class="headerlink" title="Implementation of IPC"></a>Implementation of IPC</h3><p>The Binder’s main function is implemention of IPC, with the kernel driver.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://dachmx.github.io/2015/10/09/android/analysisonbinderofandroid/" data-id="cjujwmifp000d18uwcx1pe770" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/aidl/">aidl</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ibinder/">ibinder</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/service/">service</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android/analysisonaidlofandroid" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/09/android/analysisonaidlofandroid/" class="article-date">
  <time datetime="2015-10-08T16:00:00.000Z" itemprop="datePublished">2015-10-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/09/android/analysisonaidlofandroid/">Analysis on AIDL for Android</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="current-situation"><a href="#current-situation" class="headerlink" title="current situation"></a>current situation</h2><h3 id="Field-of-use"><a href="#Field-of-use" class="headerlink" title="Field of use"></a>Field of use</h3><pre><code>AIDL is not used frequently. There may be two reasons existing. First, the AIDL program can not be developed easily lik java program. Second, We just needn&apos;t use AIDL, in other words, we can write other simple program insteadly. 
</code></pre><h2 id="Analysis-of-ViewPager"><a href="#Analysis-of-ViewPager" class="headerlink" title="Analysis of ViewPager"></a>Analysis of ViewPager</h2><h3 id="Desc-of-ViewPager"><a href="#Desc-of-ViewPager" class="headerlink" title="Desc of ViewPager"></a>Desc of ViewPager</h3><p><a href="https://developer.android.com/guide/components/aidl.html" target="_blank" rel="noopener">AIDL</a>(Android Interface definition language), is not a controller, but a language, and you can say it as designing pattern.</p>
<p>AIDL is similar to other IDLs you might have worked with. It allows you to define the programming interface that both the client and service agree upon in order to communicate with each other using interprocess communication (IPC). On Android, one process cannot normally access the memory of another process. So to talk, they need to decompose their objects into primitives that the operating system can understand, and marshall the objects across that boundary for you. The code to do that marshalling is tedious to write, so Android handles it for you with AIDL.</p>
<p> Using AIDL is necessary only if you allow clients from different applications to access your service for IPC and want to handle multithreading in your service. If you do not need to perform concurrent IPC across different applications, you should create your interface by implementing a Binder or, if you want to perform IPC, but do not need to handle multithreading, implement your interface using a Messenger. Regardless, be sure that you understand Bound Services before implementing an AIDL.</p>
<h3 id="Use-of-AIDL"><a href="#Use-of-AIDL" class="headerlink" title="Use of AIDL"></a>Use of AIDL</h3><p>To create a bounded service using AIDL, follow these steps:</p>
<h4 id="Create-the-aidl-file"><a href="#Create-the-aidl-file" class="headerlink" title="Create the .aidl file"></a>Create the .aidl file</h4><p>This file defines the programming interface with method signatures.</p>
<h4 id="Implement-the-interface"><a href="#Implement-the-interface" class="headerlink" title="Implement the interface"></a>Implement the interface</h4><p>The Android SDK tools generate an interface in the Java programming language, based on your .aidl file. This interface has an inner abstract class named Stub that extends Binder and implements methods from your AIDL interface. You must extend the Stub class and implement the methods.</p>
<h4 id="Expose-the-interface-to-clients"><a href="#Expose-the-interface-to-clients" class="headerlink" title="Expose the interface to clients"></a>Expose the interface to clients</h4><p>Implement a Service and override onBind() to return your implementation of the Stub class.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://dachmx.github.io/2015/10/09/android/analysisonaidlofandroid/" data-id="cjujwmifp000818uw63bcb1z6" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/aidl/">aidl</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ibinder/">ibinder</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/service/">service</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-bibis/processtextfilewithawkparti" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/09/11/bibis/processtextfilewithawkparti/" class="article-date">
  <time datetime="2015-09-10T16:00:00.000Z" itemprop="datePublished">2015-09-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/11/bibis/processtextfilewithawkparti/">Process Text File with AWK Part I</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="AWK-Process-TEXT-File"><a href="#AWK-Process-TEXT-File" class="headerlink" title="AWK Process TEXT File"></a>AWK Process TEXT File</h2><p>codes : <a href="https://github.com/dachmx/tmpcode/tree/master/tmpp" target="_blank" rel="noopener">tmpp</a></p>
<p>Basic functions of awk are be used in this awk file.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://www.gnu.org/software/gawk/manual/gawk.html" target="_blank" rel="noopener">The GNU Awk User’s Guide</a></p>
<p><a href="http://man.linuxde.net/awk" target="_blank" rel="noopener">awk blog</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://dachmx.github.io/2015/09/11/bibis/processtextfilewithawkparti/" data-id="cjujwmih0002d18uw80p9v0nu" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/awk/">awk</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/commontool/">commontool</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shell/">shell</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android/useviewpagerofandroid" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/15/android/useviewpagerofandroid/" class="article-date">
  <time datetime="2015-08-14T16:00:00.000Z" itemprop="datePublished">2015-08-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/15/android/useviewpagerofandroid/">Using ViewPager for Android Dev</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="current-situation"><a href="#current-situation" class="headerlink" title="current situation"></a>current situation</h2><h3 id="Field-of-use"><a href="#Field-of-use" class="headerlink" title="Field of use"></a>Field of use</h3><pre><code>Most of apps will use viewpager in different format, even a very simple app. For example, the [wechat](https://play.google.com/store/apps/details?id=com.tencent.mm&amp;hl=zh_CN). It only has for main content pages, but it uses viewpager. Our system app, luncher, uses viewpager as well. 
</code></pre><h3 id="Formats-of-ViewPager"><a href="#Formats-of-ViewPager" class="headerlink" title="Formats of ViewPager"></a>Formats of ViewPager</h3><pre><code>The main format is that a container wrapping many pages shown horizonally. It can be used show ad pictures, and also can be used show many fragments. In many situations, the other indicators will be used with it.
</code></pre><h2 id="Analysis-of-ViewPager"><a href="#Analysis-of-ViewPager" class="headerlink" title="Analysis of ViewPager"></a>Analysis of ViewPager</h2><h3 id="Source-Code"><a href="#Source-Code" class="headerlink" title="Source Code"></a>Source Code</h3><p><a href="http://code.metager.de/source/xref/android/4.0.3/frameworks-support/v4/java/android/support/v4/view/ViewPager.java" target="_blank" rel="noopener">ViewPager</a> is type of ViewGroup, so that it has all features of ViewGroup.</p>
<p>ViewPager shows data by the PageAdpter. It means that viewpager likes ListView showing data by adapter pattern.</p>
<p>The main feature of ViewPager unlike others views is its TouchEvent function. It intercept the touch events and translates them to the operation on its pages, such as scroll left or right, etc.</p>
<h3 id="Use-of-ViewPager"><a href="#Use-of-ViewPager" class="headerlink" title="Use of ViewPager"></a>Use of ViewPager</h3><p>Using ViewPager by declaring in the layout file, as follows:</p>
<pre><code class="java">&lt;android.support.v4.view.ViewPager  
    android:id=<span class="string">"@+id/viewpager"</span>  
    android:layout_width=<span class="string">"wrap_content"</span>
    android:layout_height=<span class="string">"200dip"</span>  
    android:layout_gravity=<span class="string">"center"</span>&gt;  

    &lt;android.support.v4.view.PagerTitleStrip  
        android:id=<span class="string">"@+id/pagertitle"</span>    
        android:layout_width=<span class="string">"wrap_content"</span>    
        android:layout_height=<span class="string">"wrap_content"</span>    
        android:layout_gravity=<span class="string">"top"</span>  
        /&gt;  

&lt;/android.support.v4.view.ViewPager&gt; 
</code></pre>
<p>Of course, you can replace the PageTitleStrip by other indicators. You just need change the PageChangeListener for viewpager.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://dachmx.github.io/2015/08/15/android/useviewpagerofandroid/" data-id="cjujwmig4001518uw14p0rh6v" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ad/">ad</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/fragment/">fragment</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scroller/">scroller</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/viewpager/">viewpager</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android/androidappsecureproblemparty1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/06/13/android/androidappsecureproblemparty1/" class="article-date">
  <time datetime="2015-06-12T16:00:00.000Z" itemprop="datePublished">2015-06-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/06/13/android/androidappsecureproblemparty1/">Android App Secure Problem Part 1</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Security is important for applications involving direct money transactions or personal privacy concerns. Android system due to its open source properties, the market for open-source custom ROM vary, in the system level security and vulnerability are not the same, Android application market app review relatively iOS is also relatively broad, Many vulnerabilities provide an opportunity. Some mainstream app on the market although some have done some security precautions, but because most of the app does not involve financial security, so the importance of security is not enough; and because security is a door system disciplines, most of the app layer developers lack security Technology accumulation, measures are relatively limited.</p>
<p>This article will focus on analysis of Android APP facing security issues, preventive measures and a series of security technology program implementation.</p>
<h2 id="The-security-issues-facing"><a href="#The-security-issues-facing" class="headerlink" title="The security issues facing"></a>The security issues facing</h2><h3 id="virus"><a href="#virus" class="headerlink" title="virus"></a>virus</h3><p>Android virus is a mobile phone Trojans, mainly malicious applications. Such as last year, CCTV exposure of a “bank ruthless” mobile phone banking Trojan, imitate the real mobile banking software, through phishing access to user input phone number, ID number, bank account number, password and other information, and these Information uploaded to the hacker specified server. Steal bank account password, the user account in the funds immediately transferred away. Some of the independent existence of mobile phone Trojans, while others are disguised as a picture file attached to the genuine App, hidden very strong, some viruses will appear variants, and more powerful generation than generation.<br>These viruses have some general characteristics:</p>
<ul>
<li><p>Mother packet + malicious sub-packet operating mechanism.</p>
</li>
<li><p>Through technical means to prevent users through the normal way to uninstall.</p>
</li>
<li><p>To steal the user account funds for the purpose.</p>
</li>
<li><p>To SMS as a command channel.</p>
</li>
<li><p>Critical Information Disclosure</p>
</li>
</ul>
<p>Although the java code to do the general confusion, but several major components of Android is dependent on the way to create the injection, it can not be confused, and some commonly used anti-compiler tools such as apktool can be effortless to restore java in the clear text information , Native library information can also be obtained through objdump or IDA. So once java or native code in the existence of expressly sensitive information, basically there is no security in terms of.</p>
<h3 id="APP-re-packaged"><a href="#APP-re-packaged" class="headerlink" title="APP re-packaged"></a>APP re-packaged</h3><p>That is, decompile and re-join the malicious code logic, a new package APK file. The purpose of re-packaging are generally mentioned above and the virus, the genuine apk to unpack, insert the malicious virus re-packaged and released, so a strong camouflage. Intercepted app re-packaged to a certain extent to prevent the spread of the virus.</p>
<h3 id="Process-was-hijacked"><a href="#Process-was-hijacked" class="headerlink" title="Process was hijacked"></a>Process was hijacked</h3><p>This is almost the most targeted attack a way, usually through the process of injection or debugging process to hook the process to change the logic and order of running the program to obtain the memory information to run the program, that is, all the user behavior Was monitored, this is the most commonly used account password theft a way. Of course, hook behavior is not necessarily entirely malicious, such as some security software will use the hook function to do proactive defense (such as LBE and our mobile security laboratory latest apkprotect online reinforcement products). In general, hook need to get root privileges or the same process with the hook authority, so if your phone is not root, but is genuine apk, was injected is still very difficult.</p>
<h3 id="Data-is-hijacked-during-transmission"><a href="#Data-is-hijacked-during-transmission" class="headerlink" title="Data is hijacked during transmission"></a>Data is hijacked during transmission</h3><p>The most common hijacking in the transmission process is a man-in-the-middle attack. Many of the more secure applications require that all business requests go through https, but the middleman attack on https is getting more and more, and we find that in practice, certificate exchange and authentication are in some cottage phones or non-mainstream ROMs There are some problems, so that the use of https encounter obstacles.</p>
<h3 id="Keyboard-input-security-risks"><a href="#Keyboard-input-security-risks" class="headerlink" title="Keyboard input security risks"></a>Keyboard input security risks</h3><p>Payment password is generally entered through the keyboard, keyboard input directly affects the security of the security of the password. The security risks of the keyboard come from three aspects:</p>
<p>The use of third-party input method, all the click events are technically can be trilateral input method interception, if you are not careful to use some illegal input method, or input method to upload information and leaked, the consequences are unimaginable.</p>
<p>Screenshot, the method requires mobile phone with root privileges to run screenshots software</p>
<p>Getevent, by reading the system driver layer dev / input / event1 in the information to obtain the location of the phone touch screen coordinates, combined with the keyboard layout, you can figure out the incident with the specific number of mapping, which is currently more commonly used attacks the way.</p>
<p>Before doing a set of security keyboard program, that is, custom keyboard + digital layout randomization. But the randomization of the keyboard is very inconsistent with the operating habits of human nature. So after the random words have also been removed.</p>
<p>Also need to explain, there is a more secure way is now trustzone standard has GlobalPlatform_Trusted_User_Inteface, that is to say in the trustzone security interface in a set of standards, if the security keyboard in the trustzone in the pop-up, the hacker regardless of the means through the Sha Can not get the password, is the most secure way, but trustzone depends on the underlying equipment to achieve, if the device does not support trustzone, or trustzone does not support GlobalPlatform_Trusted_User_Inteface standard, we can not do anything. *</p>
<h3 id="Webview-vulnerability"><a href="#Webview-vulnerability" class="headerlink" title="Webview vulnerability"></a>Webview vulnerability</h3><p>As the prevalence of hybrid app now, Webview in the use of the app is more and more, Android system Webview there are some loopholes, resulting in js right to mention. The most famous is the legendary js injection vulnerabilities and webkit xss vulnerabilities, the following section we will detail.</p>
<h3 id="The-server-did-not-deal-with-was-infiltration-attacks"><a href="#The-server-did-not-deal-with-was-infiltration-attacks" class="headerlink" title="The server did not deal with, was infiltration attacks"></a>The server did not deal with, was infiltration attacks</h3><p>This is the most anti-replay attacks and injection attacks, this is not discussed in the context of this article.<br>Android APP security architecture</p>
<h3 id="Familiarity-with-Https"><a href="#Familiarity-with-Https" class="headerlink" title="Familiarity with Https"></a>Familiarity with Https</h3><p>In essence, https is a two-way authentication process, but because too many Android devices too messy, Android device certificate is not uniform, generally only client authentication server-side certificate, and the server-side in the https layer will not verify the customer End certificate, so the actual application scenario is a one-way authentication process.<br>SchemeRegistry.register (new Scheme ( “https”, SSLSocketFactory.getSocketFactory (), 443));</p>
<p>This is the use of google API to https for verification, the main check four aspects:</p>
<ul>
<li><p>Whether the signature CA is legal</p>
</li>
<li><p>Domain names match</p>
</li>
<li><p>Is not a self-signed certificate</p>
</li>
<li><p>Whether the certificate has expired</p>
</li>
</ul>
<p>If the root certificate used by the server is self-signed or if the signing authority is not in the list of trusted certificates for the appliance, then http connections using httpclient will fail. There are several ways to solve this problem:</p>
<p>The simplest approach is that httpclient does not open certificate validation, trust all the way the certificate. This approach is relatively simple, but the security is equivalent to http as bad, hackers can easily falsify the certificate for man-in-the-middle attacks, resulting in user transaction data and other sensitive information disclosure. Now most of the mobile browser in order to be compatible with the various certificates of the site is to take such a way, but also some mainstream browsers on the non-root certificate, only check the host and validity, if failed, to the user prompts, but also Can continue to browse or interrupt the prompt to ensure that the user experience at the same time to enhance security.</p>
<p>Using the default certificate covering google checking mechanism (X509TrustManager) way, before initiating https connections the server certificate is added to the list of trusted certificates httpclient, this is relatively complex, error-prone, and since each site The definition of certificates are not the same, it is difficult to find a unified approach to all non-root certificate for certificate inspection.</p>
<h3 id="Payment-Password-Security"><a href="#Payment-Password-Security" class="headerlink" title="Payment Password Security"></a>Payment Password Security</h3><pre><code>Payment password is only a representative of the data, it is actually representative of the client some sensitive data, such as bank card number, mobile phone number, password, cvv, expiration date. Especially against strong passwords and cvv such sensitive data, in order to improve the performance of applications and to prevent others from cracking.
</code></pre><p>We use RSA and AES encryption of these two sets of encryption methods, as shown below:</p>
<h3 id="Anti-debug-module"><a href="#Anti-debug-module" class="headerlink" title="Anti-debug module"></a>Anti-debug module</h3><p>Debugging refers to the current app by other programs using a specific method (debugger, ptrace, etc.) tracking hijacking, after debugging all the behavior of the app can be viewed and modified by other programs, we can think of the next usually through gdb debugger. Anti-debugging function in two steps: first test whether the current app is being debugged. If the app is being debugged, it returns the process name of the process the debugger is in. If the app is not debugged, protecting the app is no longer debugged by other programs. There are two ways to protect the app from being debugged: - One is the debug option in the kernel that has a debugger turned off, but we can not change the kernel state as an app. - The other is a dual process anti-debugging. We know that a process allows only one debugger, so in the process up at the same time, will fork a daemon (daemon), and ptrace protected app process, the daemon will intercept the debugger entry to ensure that other programs can not debug The current app. Once the daemon is activated, it will remain until the current application exits, if the forced shutdown of the daemon, the current App will be closed. Here we should pay attention to signal processing.</p>
<h3 id="Anti-injection-module"><a href="#Anti-injection-module" class="headerlink" title="Anti-injection module"></a>Anti-injection module</h3><p>Injection is the current App process by other programs using specific methods (ptrace, dlopen, etc.) into the module does not belong to the current App. In general, the injection is not an end, just means, so after the injection module generally has a special behavior, such as the collection of App’s privacy data, the use of methods such as Hook hijack App normal operation process. Which Hook is the most important security risks. From the technical means, the premise is the need to debug the injection. So if the current App has been protected for not being debugged, then theoretically there is no risk of being injected. However, if the anti-debug module is activated later, then before the activation, App still there is the possibility of being injected. Anti-injection function is to detect the current App which modules are injected and hijacked (Hook) the. Android Hook and Hook methods are divided into two categories: Java Hook and So Hook. Java Hook which is divided into static members Hook and function hook, you can check the vm dex memory fields and method field to determine whether there are java injection. So Hook is all linux system hook mode, divided into GOT Hook, Symbol Hook and Inline Hook. Inline Hook is generally compiled by way of injection, Symbol Hook is generally used LD_PRELOAD way to the function plus hook, the two injection are currently Not to prevent, the main anti-or GOT hook. I have been in a number of years ago through the GOT hook principle in the brush machine, no root privileges in the system implanted su program, the system to force a root. GOT Hook principle is simply to say that through cat / proc / pid / maps get the app process so the load address, and then through the analysis of the GOT table so that the offset function of each address, calculate the function of the absolute address of the entrance, And then replace the address function with the injection function. So anti-native injection method is: through the app process space, see the loaded library is not in / system or / data / data / app under, if not, then there must be injected.</p>
<h3 id="Anti-tampering-module"><a href="#Anti-tampering-module" class="headerlink" title="Anti-tampering module"></a>Anti-tampering module</h3><p>App is the traditional method to determine whether piracy, the industry’s usual practice is to collect a large number of genuine application of the information prior to do white list, and then use the current App’s package name, signature and other information to do matching. The accuracy of this method depends on the size of the white list library and requires network connectivity. Anti-tampering based on re-packaged App and genuine App’s dex arrangement features to determine whether the App is repackaged, fast, high accuracy.</p>
<h3 id="Android-security-programming"><a href="#Android-security-programming" class="headerlink" title="Android security programming"></a>Android security programming</h3><p>For some Android-specific syntax and design, there is also the risk of being attacked, we usually code will be released before the security scan, security scanning sweep surface is the most important point of the following: - Security log this information is relatively simple, and does not allow Print sensitive data, and then must be closed before printing the print log switch. - Intent information disclosure in order to start another one application of Activity, we often use some implicit Intent, if it contains sensitive information, so long as the third-party app to register the same Intent Filter, it is possible to intercept sensitive information, so To send an implicit Intent, you must specify the receiver and permission.<br>Security of security components</p>
<p>Android includes four components: Activitie, Service, Content Provider, Broadband Receiver, each of them can be opened outside of Intent implicit way, so long as these components are not open to the public must be indicated in the manifest inside exported to false, prohibit other Program access to our components, and external components to be interactive, you should add some access control, but also need to pass on the data for safe verification.<br>IPC null reference</p>
<p>This occurred mainly in the opening assembly, since the opening of the component can receive Intent, which will generally contain some data when we do not judge these data when empty, app usually crash, an attacker might send data is empty Intent to attack.</p>
<h3 id="WebView-vulnerability-attack-and-defense"><a href="#WebView-vulnerability-attack-and-defense" class="headerlink" title="WebView vulnerability attack and defense"></a>WebView vulnerability attack and defense</h3><p>Js injection vulnerability</p>
<p>The problem was first documented in a paper called “Attacks on WebView in the Android System” in 2011 [<a href="http://www.cis.syr.edu/~wedu/Research/paper/webview_acsac2011.pdf]" target="_blank" rel="noopener">http://www.cis.syr.edu/~wedu/Research/paper/webview_acsac2011.pdf]</a> (<a href="http://www.cis.syr.edu/~wedu/Research/paper/webview_acsac2011.pdf)" target="_blank" rel="noopener">http://www.cis.syr.edu/~wedu/Research/paper/webview_acsac2011.pdf)</a>, this article points to the way addJavascriptInterface in the function of some of the risks, such as your app to achieve a read and write files Class, and then use the addJavascriptInterface interface allows js call, then it may lead to an attacker to directly call the class to read and write files to achieve the operation. This approach is the most primitive risk and does not directly point to the use of the getClass () method. Later, Baidu security group in 2013, the official release of the loopholes in the high-risk work order: <a href="http://security.baidu.com/risk/findNewsDetail.do" target="_blank" rel="noopener">http://security.baidu.com/risk/findNewsDetail.do</a>; jsessionid = B09405787822801D67251543B2B8C5CB.security_client-web01? Id = 336. This vulnerability is mainly through the getClass () method directly call java. Lang. Runtime interface to execute system commands, so that any js has the same app operating authority!</p>
<p>The solution is mainly two:</p>
<p>For Android 4.2 and above, Google has fixed the vulnerability, only native<br>Interface add @ addJavaInterface label can be.<br>For Android4.2 previous version, you need to rewrite addJavaInterface, js calls and native calls to achieve their mapping. This is a classic cordova design, it is worth learning about.</p>
<p>WebView phishing vulnerability</p>
<p>Fishing this thing has been the most commonly used security sector attacks, but also the most difficult to solve a class of technical problems, and fishing means is strange to prevent fishing in addition to allowing users to improve security awareness, do not click on the link from unknown sources, The technical level can do the following two points: - Check WebView to load the target URL if there is phishing and other security risks - on the webview closed scripting environment<br>WebView cross-domain vulnerability</p>
<p>Mainly due to the JS XmlHttpRequest can read the local file to read to the app data database directory webviewCookiesChromium.db, the db is usually the system where the cookie is stored, the equivalent of disguised to read the cookie opened the permissions, the specific can For Android 4.1 and above, this does not exist in the cross-domain vulnerabilities, there is no targeted modification. [/ B] [/ color] [/ url] For all versions setAllowFileAccess (false), prohibit the page from the local html load.<br>other</p>
<p>Weak encryption: a lot of Android application encryption storage methods are relatively simple, just a simple md5, it is easy to be cracked.</p>
<p>Signature verification direction: Each apk will have a signature, the signature only the developer has, if someone else changes the code, it must be signed to run, but the modified signature and the official signature is inconsistent, so we inside Stored application of the official signature of the hashcode value, after the application starts so will check the signature is not the official signature, if not, the application directly closed, so inside the encryption function also does not work.</p>
<p> reference articles:</p>
<ul>
<li><p><a href="http://www.kymjs.com/code/2015/05/03/01" target="_blank" rel="noopener">anaysizing WebView deeply</a></p>
</li>
<li><p><a href="http://www.2cto.com/article/201506/409026.html" target="_blank" rel="noopener">appsecure</a></p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://dachmx.github.io/2015/06/13/android/androidappsecureproblemparty1/" data-id="cjujwmifp000k18uwxl98awhr" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/analysis/">analysis</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/net/">net</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/secure/">secure</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-architecture/gettingstartdubboparti" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/05/11/architecture/gettingstartdubboparti/" class="article-date">
  <time datetime="2015-05-10T16:00:00.000Z" itemprop="datePublished">2015-05-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/11/architecture/gettingstartdubboparti/">Getting Start Using Dubbo Part I (Netty, Dubbo, Zookeeper and SpringMVC)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Instruction"><a href="#Instruction" class="headerlink" title="Instruction"></a>Instruction</h2><p>demo codes :<a href="https://github.com/dachmx/democodeswithcommand/tree/master/java/dubbodemoparti" target="_blank" rel="noopener">demospring1</a></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://spring.io/guides/gs/serving-web-content/" target="_blank" rel="noopener">Serving Web Content with Spring MVC</a></p>
<p><a href="https://github.com/alibaba/dubbo" target="_blank" rel="noopener">dubbo</a></p>
<p><a href="http://dubbo.io/Developer+Guide-zh.htm" target="_blank" rel="noopener">dubbo guide</a></p>
<p><a href="http://netty.io/" target="_blank" rel="noopener">netty</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://dachmx.github.io/2015/05/11/architecture/gettingstartdubboparti/" data-id="cjujwmigk001o18uw0ceoltko" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dubbo/">dubbo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/gettingstart/">gettingstart</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/maven/">maven</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mvc/">mvc</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/netty/">netty</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/restful/">restful</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/spring/">spring</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/springframework/">springframework</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/zookeeper/">zookeeper</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-architecture/gettingstartspringmvcpart1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/05/11/architecture/gettingstartspringmvcpart1/" class="article-date">
  <time datetime="2015-05-10T16:00:00.000Z" itemprop="datePublished">2015-05-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/11/architecture/gettingstartspringmvcpart1/">Getting Start Using Spring MVC Part I (multi module with maven)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Instruction"><a href="#Instruction" class="headerlink" title="Instruction"></a>Instruction</h2><p>demo codes :<a href="https://github.com/dachmx/democodeswithcommand/tree/master/java/springmvcparti" target="_blank" rel="noopener">demospring1</a></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p>reference on <a href="https://spring.io/guides/gs/serving-web-content/" target="_blank" rel="noopener">Serving Web Content with Spring MVC</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://dachmx.github.io/2015/05/11/architecture/gettingstartspringmvcpart1/" data-id="cjujwmigk001q18uwg62hz56w" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/gettingstart/">gettingstart</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/maven/">maven</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mvc/">mvc</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/restful/">restful</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/spring/">spring</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/springframework/">springframework</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android/acustomizegradlepluginofandroidstudio" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/03/05/android/acustomizegradlepluginofandroidstudio/" class="article-date">
  <time datetime="2015-03-04T16:00:00.000Z" itemprop="datePublished">2015-03-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/03/05/android/acustomizegradlepluginofandroidstudio/">Getting Start Writing Custom Plugins of Gradle</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Introduce"><a href="#Introduce" class="headerlink" title="Introduce"></a>Introduce</h2><p>A Gradle plugin packages up reusable pieces of build logic, which can be used across many different projects and builds. Gradle allows you to implement your own custom plugins, so you can reuse your build logic, and share it with others.</p>
<p>You can implement a custom plugin in any language you like, provided the implementation ends up compiled as bytecode. For the examples here, we are going to use Groovy as the implementation language. You could use Java or Scala instead, if you want.</p>
<h2 id="Writing-a-Custom-Plugin"><a href="#Writing-a-Custom-Plugin" class="headerlink" title="Writing a Custom Plugin"></a>Writing a Custom Plugin</h2><h3 id="Packaging-a-plugin"><a href="#Packaging-a-plugin" class="headerlink" title="Packaging a plugin"></a>Packaging a plugin</h3><p>There are several places where you can put the source for the plugin.</p>
<h4 id="Build-script"><a href="#Build-script" class="headerlink" title="Build script"></a>Build script</h4><p>You can include the source for the plugin directly in the build script. This has the benefit that the plugin is automatically compiled and included in the classpath of the build script without you having to do anything. However, the plugin is not visible outside the build script, and so you cannot reuse the plugin outside the build script it is defined in.</p>
<h4 id="buildSrc-project"><a href="#buildSrc-project" class="headerlink" title="buildSrc project"></a>buildSrc project</h4><p>You can put the source for the plugin in the rootProjectDir/buildSrc/src/main/groovy directory. Gradle will take care of compiling and testing the plugin and making it available on the classpath of the build script. The plugin is visible to every build script used by the build. However, it is not visible outside the build, and so you cannot reuse the plugin outside the build it is defined in.</p>
<p>Organizing Build Logic for more details about the buildSrc project.</p>
<h4 id="Standalone-project"><a href="#Standalone-project" class="headerlink" title="Standalone project"></a>Standalone project</h4><p>You can create a separate project for your plugin. This project produces and publishes a JAR which you can then use in multiple builds and share with others. Generally, this JAR might include some custom plugins, or bundle several related task classes into a single library. Or some combination of the two.</p>
<p>In our examples, we will start with the plugin in the build script, to keep things simple. Then we will look at creating a standalone project.</p>
<h3 id="Writing-a-simple-plugin"><a href="#Writing-a-simple-plugin" class="headerlink" title="Writing a simple plugin"></a>Writing a simple plugin</h3><p>To create a custom plugin, you need to write an implementation of Plugin. Gradle instantiates the plugin and calls the plugin instance’s Plugin.apply(T) method when the plugin is used with a project. The project object is passed as a parameter, which the plugin can use to configure the project however it needs to. The following sample contains a greeting plugin, which adds a hello task to the project.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">build.gradle</span><br><span class="line">apply plugin: GreetingPlugin</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GreetingPlugin</span> <span class="keyword">implements</span> <span class="title">Plugin</span>&lt;<span class="title">Project</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">apply</span><span class="params">(Project project)</span> </span>&#123;</span><br><span class="line">        project.task(<span class="string">'hello'</span>) &lt;&lt; &#123;</span><br><span class="line">            println <span class="string">"Hello from the GreetingPlugin"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>run<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Output of gradle -q hello</span><br><span class="line">&gt; gradle -q hello</span><br><span class="line">Hello from the GreetingPlugin</span><br></pre></td></tr></table></figure></p>
<p>One thing to note is that a new instance of a given plugin is created for each project it is applied to. Also note that the Plugin class is a generic type. This example has it receiving the Project type as a type parameter. It’s possible to write unusual custom plugins that take different type parameters, but this will be unlikely (until someone figures out more creative things to do here).</p>
<p>The other content will be completed later, Sleepping…………</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://dachmx.github.io/2015/03/05/android/acustomizegradlepluginofandroidstudio/" data-id="cjujwmif9000118uwu24ma88b" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/gettingstart/">gettingstart</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/gradle/">gradle</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/plugin/">plugin</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android/gettingstartgraphicsofandroid" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/02/10/android/gettingstartgraphicsofandroid/" class="article-date">
  <time datetime="2015-02-09T16:00:00.000Z" itemprop="datePublished">2015-02-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/02/10/android/gettingstartgraphicsofandroid/">Getting Start Using Graphics of Android</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Introduce"><a href="#Introduce" class="headerlink" title="Introduce"></a>Introduce</h2><p>In android’s view, bitmap,graphics, opengl and animation are included in graphics.  The classes about shape will be introduced in this article. The other content will be introduced later.</p>
<h2 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h2><p>Shape, Shader, ColorFilter and MaskFilter</p>
<h3 id="Shape"><a href="#Shape" class="headerlink" title="Shape"></a>Shape</h3><p>Drawing a shape is very simplely. Here list codes drawing some simple shapes.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// create Paint</span></span><br><span class="line">Paint p = <span class="keyword">new</span> Paint();  </span><br><span class="line">p.setColor(Color.RED);<span class="comment">// set color as red</span></span><br><span class="line"></span><br><span class="line">canvas.drawText(<span class="string">"Draw circle"</span>, <span class="number">10</span>, <span class="number">20</span>, p);<span class="comment">// draw text</span></span><br><span class="line">canvas.drawCircle(<span class="number">60</span>, <span class="number">20</span>, <span class="number">10</span>, p);<span class="comment">// small circle</span></span><br><span class="line">p.setAntiAlias(<span class="keyword">true</span>);<span class="comment">// set Jagged effect</span></span><br><span class="line">canvas.drawCircle(<span class="number">120</span>, <span class="number">20</span>, <span class="number">20</span>, p);<span class="comment">// big circle  </span></span><br><span class="line"></span><br><span class="line">canvas.drawText(<span class="string">"Line and Arc："</span>, <span class="number">10</span>, <span class="number">60</span>, p);</span><br><span class="line">p.setColor(Color.GREEN);<span class="comment">// set green </span></span><br><span class="line">canvas.drawLine(<span class="number">60</span>, <span class="number">40</span>, <span class="number">100</span>, <span class="number">40</span>, p);<span class="comment">// line</span></span><br><span class="line">canvas.drawLine(<span class="number">110</span>, <span class="number">40</span>, <span class="number">190</span>, <span class="number">80</span>, p);  </span><br><span class="line"></span><br><span class="line">p.setStyle(Paint.Style.STROKE);<span class="comment">//only path draw</span></span><br><span class="line">RectF oval1=<span class="keyword">new</span> RectF(<span class="number">150</span>,<span class="number">20</span>,<span class="number">180</span>,<span class="number">40</span>);  </span><br><span class="line">canvas.drawArc(oval1, <span class="number">180</span>, <span class="number">180</span>, <span class="keyword">false</span>, p);<span class="comment">//small arc</span></span><br><span class="line">oval1.set(<span class="number">190</span>, <span class="number">20</span>, <span class="number">220</span>, <span class="number">40</span>);  </span><br><span class="line">canvas.drawArc(oval1, <span class="number">180</span>, <span class="number">180</span>, <span class="keyword">false</span>, p);<span class="comment">//small arc</span></span><br><span class="line">oval1.set(<span class="number">160</span>, <span class="number">30</span>, <span class="number">210</span>, <span class="number">60</span>);  </span><br><span class="line">canvas.drawArc(oval1, <span class="number">0</span>, <span class="number">180</span>, <span class="keyword">false</span>, p);<span class="comment">//small arc</span></span><br><span class="line"></span><br><span class="line">canvas.drawText(<span class="string">"draw Rect: "</span>, <span class="number">10</span>, <span class="number">80</span>, p);  </span><br><span class="line">p.setColor(Color.GRAY);</span><br><span class="line">p.setStyle(Paint.Style.FILL);</span><br><span class="line">canvas.drawRect(<span class="number">60</span>, <span class="number">60</span>, <span class="number">80</span>, <span class="number">80</span>, p);<span class="comment">// rect</span></span><br><span class="line">canvas.drawRect(<span class="number">60</span>, <span class="number">90</span>, <span class="number">160</span>, <span class="number">100</span>, p);<span class="comment">//rect</span></span><br><span class="line"></span><br><span class="line">canvas.drawText(<span class="string">"Arc and Oval:"</span>, <span class="number">10</span>, <span class="number">120</span>, p);  </span><br><span class="line"> </span><br><span class="line">Shader mShader = <span class="keyword">new</span> LinearGradient(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>,  </span><br><span class="line">        <span class="keyword">new</span> <span class="keyword">int</span>[] &#123; Color.RED, Color.GREEN, Color.BLUE, Color.YELLOW,  </span><br><span class="line">                Color.LTGRAY &#125;, <span class="keyword">null</span>, Shader.TileMode.REPEAT); <span class="comment">// draw a shader</span></span><br><span class="line">p.setShader(mShader);  </span><br><span class="line"><span class="comment">// p.setColor(Color.BLUE);  </span></span><br><span class="line">RectF oval2 = <span class="keyword">new</span> RectF(<span class="number">60</span>, <span class="number">100</span>, <span class="number">200</span>, <span class="number">240</span>);</span><br><span class="line">canvas.drawArc(oval2, <span class="number">200</span>, <span class="number">130</span>, <span class="keyword">true</span>, p);  </span><br><span class="line"><span class="comment">// draw arc when true, otherwise draw curve  </span></span><br><span class="line"><span class="comment">//draw oval</span></span><br><span class="line">oval2.set(<span class="number">210</span>,<span class="number">100</span>,<span class="number">250</span>,<span class="number">130</span>);  </span><br><span class="line">canvas.drawOval(oval2, p);  </span><br><span class="line"></span><br><span class="line">canvas.drawText(<span class="string">"triangle："</span>, <span class="number">10</span>, <span class="number">200</span>, p);  </span><br><span class="line"></span><br><span class="line">Path path = <span class="keyword">new</span> Path();  </span><br><span class="line">path.moveTo(<span class="number">80</span>, <span class="number">200</span>);<span class="comment">// draw start point</span></span><br><span class="line">path.lineTo(<span class="number">120</span>, <span class="number">250</span>);  </span><br><span class="line">path.lineTo(<span class="number">80</span>, <span class="number">250</span>);  </span><br><span class="line">path.close(); <span class="comment">// let these pointer construct a shape</span></span><br><span class="line">canvas.drawPath(path, p);  </span><br><span class="line"></span><br><span class="line"><span class="comment">// draw hexagon, six edges</span></span><br><span class="line">p.reset();<span class="comment">//reset p</span></span><br><span class="line">p.setColor(Color.LTGRAY);  </span><br><span class="line">p.setStyle(Paint.Style.STROKE);</span><br><span class="line">Path path1=<span class="keyword">new</span> Path();  </span><br><span class="line">path1.moveTo(<span class="number">180</span>, <span class="number">200</span>);  </span><br><span class="line">path1.lineTo(<span class="number">200</span>, <span class="number">200</span>);  </span><br><span class="line">path1.lineTo(<span class="number">210</span>, <span class="number">210</span>);  </span><br><span class="line">path1.lineTo(<span class="number">200</span>, <span class="number">220</span>);  </span><br><span class="line">path1.lineTo(<span class="number">180</span>, <span class="number">220</span>);  </span><br><span class="line">path1.lineTo(<span class="number">170</span>, <span class="number">210</span>);  </span><br><span class="line">path1.close();</span><br><span class="line">canvas.drawPath(path1, p);  </span><br><span class="line"> </span><br><span class="line">  </span><br><span class="line"><span class="comment">//Rounded Rectangle</span></span><br><span class="line">p.setStyle(Paint.Style.FILL);</span><br><span class="line">p.setColor(Color.LTGRAY);  </span><br><span class="line">p.setAntiAlias(<span class="keyword">true</span>);</span><br><span class="line">canvas.drawText(<span class="string">"Rounded Rectangle:"</span>, <span class="number">10</span>, <span class="number">260</span>, p);  </span><br><span class="line">RectF oval3 = <span class="keyword">new</span> RectF(<span class="number">80</span>, <span class="number">260</span>, <span class="number">200</span>, <span class="number">300</span>)</span><br><span class="line">canvas.drawRoundRect(oval3, <span class="number">20</span>, <span class="number">15</span>, p);</span><br><span class="line">  </span><br><span class="line"><span class="comment">//Bezier curve</span></span><br><span class="line">canvas.drawText(<span class="string">"Bezier curve:"</span>, <span class="number">10</span>, <span class="number">310</span>, p);  </span><br><span class="line">p.reset();  </span><br><span class="line">p.setStyle(Paint.Style.STROKE);  </span><br><span class="line">p.setColor(Color.GREEN);  </span><br><span class="line">Path path2=<span class="keyword">new</span> Path();  </span><br><span class="line">path2.moveTo(<span class="number">100</span>, <span class="number">320</span>);<span class="comment">//path start point </span></span><br><span class="line">path2.quadTo(<span class="number">150</span>, <span class="number">310</span>, <span class="number">170</span>, <span class="number">400</span>); <span class="comment">//path end point</span></span><br><span class="line">canvas.drawPath(path2, p);<span class="comment">//draw </span></span><br><span class="line">  </span><br><span class="line"><span class="comment">//Point</span></span><br><span class="line">p.setStyle(Paint.Style.FILL);  </span><br><span class="line">canvas.drawText(<span class="string">"画点："</span>, <span class="number">10</span>, <span class="number">390</span>, p);  </span><br><span class="line">canvas.drawPoint(<span class="number">60</span>, <span class="number">390</span>, p);<span class="comment">//Point  </span></span><br><span class="line">canvas.drawPoints(<span class="keyword">new</span> <span class="keyword">float</span>[]&#123;<span class="number">60</span>,<span class="number">400</span>,<span class="number">65</span>,<span class="number">400</span>,<span class="number">70</span>,<span class="number">400</span>&#125;, p);<span class="comment">//multi Points</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">//draw bitmap or Textures</span></span><br><span class="line">Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);  </span><br><span class="line">canvas.drawBitmap(bitmap, <span class="number">250</span>,<span class="number">360</span>, p);</span><br></pre></td></tr></table></figure></p>
<h3 id="Shader"><a href="#Shader" class="headerlink" title="Shader"></a>Shader</h3><p>Xml and java code can draw shader<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">shape</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">type</span>=<span class="string">"rectangle"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">gradient</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:startColor</span>=<span class="string">"@color/blue"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:centerColor</span>=<span class="string">"@color/white"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:endColor</span>=<span class="string">"@color/red"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:angle</span>=<span class="string">"45"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] rainbow = getRainbowColors();</span><br><span class="line">Shader shader = <span class="keyword">new</span> LinearGradient(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, w, rainbow, </span><br><span class="line">    <span class="keyword">null</span>, Shader.TileMode.MIRROR);</span><br><span class="line"></span><br><span class="line">Matrix matrix = <span class="keyword">new</span> Matrix();</span><br><span class="line">matrix.setRotate(<span class="number">90</span>);</span><br><span class="line">shader.setLocalMatrix(matrix);</span><br><span class="line"></span><br><span class="line">getPaint().setShader(shader);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Bitmap Shader<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Bitmap bitmap = BitmapFactory.decodeResource(</span><br><span class="line">    getResources(), R.drawable.cheetah_tile);</span><br><span class="line">Shader shader = <span class="keyword">new</span> BitmapShader(bitmap, </span><br><span class="line">    Shader.TileMode.REPEAT, Shader.TileMode.REPEAT);</span><br><span class="line">textView.getPaint().setShader(shader);</span><br></pre></td></tr></table></figure></p>
<h3 id="ColorFilter"><a href="#ColorFilter" class="headerlink" title="ColorFilter"></a>ColorFilter</h3><p>ColorMatrix: Grayscale<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Bitmap bitmap = Bitmap.createBitmap(original.getWidth(), </span><br><span class="line">    original.getHeight(), Bitmap.Config.ARGB_8888);</span><br><span class="line">Canvas canvas = <span class="keyword">new</span> Canvas(bitmap);</span><br><span class="line"></span><br><span class="line">Paint paint = <span class="keyword">new</span> Paint();</span><br><span class="line">paint.setColorFilter(<span class="keyword">new</span> ColorMatrixColorFilter(</span><br><span class="line">    getColorMatrix()));</span><br><span class="line">canvas.drawBitmap(original, <span class="number">0</span>, <span class="number">0</span>, paint);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> bitmap;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> ColorMatrix <span class="title">getColorMatrix</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  ColorMatrix colorMatrix = <span class="keyword">new</span> ColorMatrix();</span><br><span class="line">  colorMatrix.setSaturation(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">return</span> colorMatrix;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ColorMatrix: Sepia<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> ColorMatrix <span class="title">getColorMatrix</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  ColorMatrix colorMatrix = <span class="keyword">new</span> ColorMatrix();</span><br><span class="line">  colorMatrix.setSaturation(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  ColorMatrix colorScale = <span class="keyword">new</span> ColorMatrix();</span><br><span class="line">  colorScale.setScale(<span class="number">1</span>, <span class="number">1</span>, <span class="number">0.8f</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Convert to grayscale, then apply brown color</span></span><br><span class="line">  colorMatrix.postConcat(colorScale);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> colorMatrix;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ColorMatrix: Binary<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> ColorMatrix <span class="title">getColorMatrix</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  ColorMatrix colorMatrix = <span class="keyword">new</span> ColorMatrix();</span><br><span class="line">  colorMatrix.setSaturation(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">float</span> m = <span class="number">255f</span>;</span><br><span class="line">  <span class="keyword">float</span> t = -<span class="number">255</span>*<span class="number">128f</span>;</span><br><span class="line">  ColorMatrix threshold = <span class="keyword">new</span> ColorMatrix(<span class="keyword">new</span> <span class="keyword">float</span>[] &#123;</span><br><span class="line">      m, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, t,</span><br><span class="line">      <span class="number">0</span>, m, <span class="number">0</span>, <span class="number">1</span>, t,</span><br><span class="line">      <span class="number">0</span>, <span class="number">0</span>, m, <span class="number">1</span>, t,</span><br><span class="line">      <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Convert to grayscale, then scale and clamp</span></span><br><span class="line">  colorMatrix.postConcat(threshold);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> colorMatrix;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>you also implement ColorMatrix: Invert, ColorMatrix: Alpha blue effect</p>
<p>LightingColorFilter<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** Create a colorfilter that multiplies the RGB channels by one color, </span></span><br><span class="line"><span class="comment">    and then adds a second color. */</span></span><br><span class="line">LightingColorFilter(<span class="keyword">int</span> mul, <span class="keyword">int</span> add)</span><br><span class="line">R<span class="string">' = R * mul.R + add.R</span></span><br><span class="line"><span class="string">G'</span> = G * mul.G + add.G</span><br><span class="line">B<span class="string">' = B * mul.B + add.B</span></span><br><span class="line"><span class="string">//Little brother of ColorMatrixColorFilter</span></span><br><span class="line"><span class="string">[ mul.R,     0,     0, 0, add.R</span></span><br><span class="line"><span class="string">      0, mul.G,     0, 0, add.G,</span></span><br><span class="line"><span class="string">      0,     0, mul.B, 0, add.B,</span></span><br><span class="line"><span class="string">      0,     0,     0, 1,     0 ]</span></span><br><span class="line"><span class="string">/*</span></span><br><span class="line"><span class="string">mul.R = Color.red(mul) / 255f</span></span><br><span class="line"><span class="string">e.g. #ff0000 → 0xff / 255 = 255 / 255 = 1</span></span><br><span class="line"><span class="string">*/</span></span><br></pre></td></tr></table></figure></p>
<p>Porter-Duff Modes</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Bitmap bitmap = Bitmap.createBitmap(</span><br><span class="line">    original.getWidth(), original.getHeight(), </span><br><span class="line">    Bitmap.Config.ARGB_8888);</span><br><span class="line">Canvas canvas = <span class="keyword">new</span> Canvas(bitmap);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Draw the original bitmap (DST during Porter-Duff transfer)</span></span><br><span class="line">canvas.drawBitmap(original, <span class="number">0</span>, <span class="number">0</span>, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// DST_IN = Whatever was there, keep the part that overlaps </span></span><br><span class="line"><span class="comment">// with what I'm drawing now</span></span><br><span class="line">Paint maskPaint = <span class="keyword">new</span> Paint();</span><br><span class="line">maskPaint.setXfermode(</span><br><span class="line">    <span class="keyword">new</span> PorterDuffXfermode(PorterDuff.Mode.DST_IN));</span><br><span class="line">canvas.drawBitmap(mask, <span class="number">0</span>, <span class="number">0</span>, maskPaint);</span><br></pre></td></tr></table></figure>
<p>Path effects and other effect all can be implemented with Porter-Duff</p>
<h3 id="MaskFilter"><a href="#MaskFilter" class="headerlink" title="MaskFilter"></a>MaskFilter</h3><p>EmbossMaskFilter</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">applyFilter</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    TextView textView, <span class="keyword">float</span>[] direction, <span class="keyword">float</span> ambient, </span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">float</span> specular, <span class="keyword">float</span> blurRadius)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="number">11</span>) &#123;</span><br><span class="line">    textView.setLayerType(View.LAYER_TYPE_SOFTWARE, <span class="keyword">null</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  EmbossMaskFilter filter = <span class="keyword">new</span> EmbossMaskFilter(</span><br><span class="line">    direction, ambient, specular, blurRadius);</span><br><span class="line">  textView.getPaint().setMaskFilter(filter);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ref:</p>
<p><a href="http://chiuki.github.io/android-shaders-filters/#/" target="_blank" rel="noopener">android-shaders-filters</a></p>
<p><a href="https://developer.android.com/guide/topics/graphics/index.html" target="_blank" rel="noopener">Animation and Graphics</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://dachmx.github.io/2015/02/10/android/gettingstartgraphicsofandroid/" data-id="cjujwmig4000n18uw1wh6tubt" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/gettingstart/">gettingstart</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/graphics/">graphics</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-architecture/differencebetwwennetty3andnetty4" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/02/10/architecture/differencebetwwennetty3andnetty4/" class="article-date">
  <time datetime="2015-02-09T16:00:00.000Z" itemprop="datePublished">2015-02-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/02/10/architecture/differencebetwwennetty3andnetty4/">Difference Between Netty3 and Netty4</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Instruction"><a href="#Instruction" class="headerlink" title="Instruction"></a>Instruction</h2><p>Netty 4 has been released three years, compared to Netty 3, Netty 4 in the memory model and the thread model has been modified. Now Netty 4 is already very mature, and for the Square company, Netty 4 also has a significant feature: the HTTP/2 protocol of the native support. Square expects its mobile devices to use the HTTP/2 protocol and is switching the back-end RPC framework to gRPC: an RPC/2 protocol-based RPC framework. Therefore, Tracon as a proxy service, must support HTTP/2 protocol.</p>
<h2 id="Analysis"><a href="#Analysis" class="headerlink" title="Analysis"></a>Analysis</h2><h3 id="Single-Thread-Channel"><a href="#Single-Thread-Channel" class="headerlink" title="Single Thread Channel"></a>Single Thread Channel</h3><p>Unlike Netty 3, Netty 4’s inbound (data input) and outbound (data out) events are all in the same thread. This is the time to write the processor, you can remove the thread-safe code. However, this change also makes the upgrade process to meet the conditions of competition caused by the problem.</p>
<p>In Netty 3, the operation for the pipeline is thread-safe, but in Netty 4, all operations are placed as events in the event loop asynchronously. As a proxy service, Tracon will have an independent inbound channel to interact with the upstream server, and a separate outbound channel to interact with the downstream server. In order to improve performance, the connection to the downstream server is cached, so that these events may occur concurrently when an event in the event loop triggers a write operation. This is fine for Netty 3, and every write will be completed before returning; but for Netty 4, these operations go into an event loop, which can lead to out-of-order messages.</p>
<p>Therefore, in the block test, and occasionally encounter the data sent to the order is not arrived, resulting in test failure.</p>
<p>When upgrading from Netty 3 to Netty 4, it is important to note that events are dispatched asynchronously if they are triggered outside the event loop.</p>
<p>codes as follows:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">userEventTriggered</span><span class="params">(ChannelHandlerContext ctx,     Object evt)</span> <span class="keyword">throws</span></span></span><br><span class="line"><span class="function">    <span class="title">if</span> <span class="params">(evt.equals(SslHandshakeCompletionEvent.SUCCESS)</span>) </span>&#123;</span><br><span class="line">        Principal peerPrincipal = engine.getSession().getPeerPrincipal();</span><br><span class="line">     <span class="comment">// 身份验证</span></span><br><span class="line">     <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">super</span>.userEventTriggered(ctx, evt);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Memory-Leak"><a href="#Memory-Leak" class="headerlink" title="Memory Leak"></a>Memory Leak</h3><p>Since direct memory is used by NIO, it is necessary to monitor direct memory for Netty network libraries, which can be done by using JMX beanjava.nio: type = BufferPool, name = direct.</p>
<p>Netty 4 introduces a thread-local Recyler based on thread-local variables to reclaim object pools. By default, a collector can hold up to 262k objects, for ByteBuf, less than 64k of the default shared cache object. In other words, each collector can hold up to 17G of direct memory.</p>
<p>Normally, the NIO cache is sufficient to cope with an instantaneous amount of data. However, if you have a very slow reading of the back-end, will greatly increase the memory usage. In addition, when the cache memory in the NIO read and write by other threads, the allocation of the memory of the thread will not be able to reclaim the memory.</p>
<p>The Netty project has also made some corrections to the problem of limiting the growth of objects that can not be recovered by the reclaimer, which causes memory exhaustion:</p>
<ul>
<li><p>Allows you to set the maximum number of WeakOrderQueue instances per thread;</p>
</li>
<li><p>The memory allocation / sharing ratio is introduced in the reclaimer;</p>
</li>
<li><p>Porting SendBufferPooled from Netty 3.10, used when using a non-shared ByteBuf allocator (ByteBufAllocator);</p>
</li>
</ul>
<p>From the experience of upgrading Netty 4, it is recommended that all developers configure the Recycler based on available memory and threads. The maximum number of objects that the Reclaimer can hold can be set with the -Dio.netty.recycler.maxCapacity parameter, and the maximum memory limit can be set with the -Dio.netty.threadLocalDirectBufferSize parameter. If you want to completely close the collector, you can set-Dio.netty.recycler.maxCapacity 0</p>
<p> Use Global Exception Process, codes as follows:<br> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">LoggingExceptionHandler</span> <span class="keyword">implements</span> <span class="title">Thread</span>.<span class="title">UncaughtExceptionHandler</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = Logger.getLogger(LoggingExceptionHandler.class);</span><br><span class="line">    <span class="comment">/** 注册成默认处理器 */</span></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">registerAsDefault</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Thread.setDefaultUncaughtExceptionHandler(<span class="keyword">new</span> LoggingExceptionHandler());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">uncaughtException</span><span class="params">(Thread t, Throwable e)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (e <span class="keyword">instanceof</span> Exception) &#123;</span><br><span class="line">            logger.error(<span class="string">"Uncaught exception killed thread named '"</span> + t.getName() + <span class="string">"'."</span>, e);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            logger.fatal(<span class="string">"Uncaught error killed thread named '"</span> + t.getName() + <span class="string">"'."</span> + <span class="string">" Exiting now."</span>, e);</span><br><span class="line">            System.exit(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="HTTP-decoder-refactor"><a href="#HTTP-decoder-refactor" class="headerlink" title="HTTP decoder refactor"></a>HTTP decoder refactor</h3><p>Netty 4 refactored the HTTP decoders, and specifically improved support for chunked data. HTTP message body is split into HttpContent object, if the HTTP data through the block transmission, there will be more than one HttpContent order to arrive, when the data block transmission end, there will be a LastHttpContent object. It should be noted that, LastHttpContent inherited from HttpContent, must not be handled in the following manner:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">If (msg <span class="keyword">instanceof</span> HttpContent) &#123;</span><br><span class="line">   ...</span><br><span class="line">&#125;&#125;</span><br><span class="line">If (msg <span class="keyword">instanceof</span> LastHttpContent) &#123;</span><br><span class="line">   ... / / The last block will be repeated, the previous <span class="keyword">if</span> already contains the LastHttpContent</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>For LastHttpContent there is a need to note that when receiving this object, HTTP message body may have been transmitted over, at this time LastHttpContent just as HTTP transmission end (similar to EOF).</p>
<h2 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h2><p><a href="http://www.infoq.com/cn/news/2016/10/Square-Netty-3-Netty-4?utm_source=infoq&amp;utm_medium=popular_widget&amp;utm_campaign=popular_content_list&amp;utm_content=homepage" target="_blank" rel="noopener">Square-Netty-3-Netty-4</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://dachmx.github.io/2015/02/10/architecture/differencebetwwennetty3andnetty4/" data-id="cjujwmigk001m18uw1tpevkhl" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/back/">back</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/netty/">netty</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/performance/">performance</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/4/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/DI/">DI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IoC/">IoC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Monitor/">Monitor</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ReactiveX/">ReactiveX</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/aar/">aar</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ad/">ad</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/adaptation/">adaptation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/advice/">advice</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ai/">ai</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/aidl/">aidl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/algorithm/">algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/allegrograph/">allegrograph</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/analysis/">analysis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android/">android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apk/">apk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/app/">app</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/application/">application</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/architecture/">architecture</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/asm/">asm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/asynchronous/">asynchronous</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/auto/">auto</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automatic/">automatic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/awk/">awk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/back/">back</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bash/">bash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bird-view/">bird view</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bitmap/">bitmap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bootloader/">bootloader</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bootrap/">bootrap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cayley/">cayley</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cipher/">cipher</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/click/">click</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/commontool/">commontool</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/construct/">construct</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ctf/">ctf</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ctrip/">ctrip</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/data/">data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/data-analysis/">data analysis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/database/">database</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/debugging/">debugging</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deep-learning/">deep learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deeplearn/">deeplearn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/design/">design</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dev/">dev</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dex/">dex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/diary/">diary</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dubbo/">dubbo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/event/">event</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fastboot/">fastboot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fastlane/">fastlane</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fix/">fix</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flockdb/">flockdb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fragment/">fragment</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/frontend/">frontend</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gettingstart/">gettingstart</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gradle/">gradle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/graph/">graph</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/graphics/">graphics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hacking/">hacking</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/handler/">handler</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/high-concurrency/">high concurrency</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hot-fix/">hot fix</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hotfix/">hotfix</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/https/">https</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ibinder/">ibinder</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/inaction/">inaction</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/infinitegraph/">infinitegraph</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jmlr/">jmlr</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kernel/">kernel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kylin/">kylin</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/layout/">layout</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/learning/">learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/library/">library</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/life/">life</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/live/">live</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/local/">local</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/looper/">looper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/machine-learning/">machine learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/">maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/message/">message</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ml/">ml</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mobile/">mobile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mood/">mood</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/multi-classification/">multi-classification</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/multi-dimensional/">multi-dimensional</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/multidex/">multidex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mvc/">mvc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/neo4j/">neo4j</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/net/">net</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/netty/">netty</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/network/">network</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nio/">nio</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nuomi/">nuomi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nuwa/">nuwa</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/optimization/">optimization</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/performance/">performance</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/permission/">permission</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/platform/">platform</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/plugin/">plugin</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/process/">process</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/production/">production</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/protection/">protection</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/queue/">queue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react-native/">react native</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/recovery/">recovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/remote/">remote</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/request/">request</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/responsive/">responsive</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/restful/">restful</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/retrofit/">retrofit</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reversing/">reversing</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rom/">rom</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/safe-mode/">safe mode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/scroller/">scroller</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/secure/">secure</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/security/">security</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/service/">service</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/">shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sklearn/">sklearn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sourcecode/">sourcecode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/">spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springboot/">springboot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springframework/">springframework</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statusbar/">statusbar</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/support-vector-machine/">support vector machine</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svd/">svd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svm/">svm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tcp-ip/">tcp/ip</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tech/">tech</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tensorflow/">tensorflow</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/testing/">testing</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/title-bar/">title bar</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tmall/">tmall</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/touch/">touch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/update/">update</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/view/">view</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/viewpager/">viewpager</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webview/">webview</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/window/">window</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/writeup/">writeup</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zookeeper/">zookeeper</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/DI/" style="font-size: 10px;">DI</a> <a href="/tags/IoC/" style="font-size: 10px;">IoC</a> <a href="/tags/Monitor/" style="font-size: 10px;">Monitor</a> <a href="/tags/ReactiveX/" style="font-size: 10px;">ReactiveX</a> <a href="/tags/aar/" style="font-size: 11.43px;">aar</a> <a href="/tags/ad/" style="font-size: 10px;">ad</a> <a href="/tags/adaptation/" style="font-size: 10px;">adaptation</a> <a href="/tags/advice/" style="font-size: 10px;">advice</a> <a href="/tags/ai/" style="font-size: 10px;">ai</a> <a href="/tags/aidl/" style="font-size: 11.43px;">aidl</a> <a href="/tags/algorithm/" style="font-size: 17.14px;">algorithm</a> <a href="/tags/allegrograph/" style="font-size: 10px;">allegrograph</a> <a href="/tags/analysis/" style="font-size: 12.86px;">analysis</a> <a href="/tags/android/" style="font-size: 11.43px;">android</a> <a href="/tags/animation/" style="font-size: 10px;">animation</a> <a href="/tags/apk/" style="font-size: 10px;">apk</a> <a href="/tags/app/" style="font-size: 10px;">app</a> <a href="/tags/application/" style="font-size: 10px;">application</a> <a href="/tags/architecture/" style="font-size: 12.86px;">architecture</a> <a href="/tags/asm/" style="font-size: 10px;">asm</a> <a href="/tags/asynchronous/" style="font-size: 10px;">asynchronous</a> <a href="/tags/auto/" style="font-size: 11.43px;">auto</a> <a href="/tags/automatic/" style="font-size: 11.43px;">automatic</a> <a href="/tags/awk/" style="font-size: 10px;">awk</a> <a href="/tags/back/" style="font-size: 10px;">back</a> <a href="/tags/bash/" style="font-size: 10px;">bash</a> <a href="/tags/bird-view/" style="font-size: 11.43px;">bird view</a> <a href="/tags/bitmap/" style="font-size: 10px;">bitmap</a> <a href="/tags/bootloader/" style="font-size: 10px;">bootloader</a> <a href="/tags/bootrap/" style="font-size: 10px;">bootrap</a> <a href="/tags/cayley/" style="font-size: 10px;">cayley</a> <a href="/tags/cipher/" style="font-size: 10px;">cipher</a> <a href="/tags/click/" style="font-size: 10px;">click</a> <a href="/tags/commontool/" style="font-size: 11.43px;">commontool</a> <a href="/tags/construct/" style="font-size: 10px;">construct</a> <a href="/tags/ctf/" style="font-size: 11.43px;">ctf</a> <a href="/tags/ctrip/" style="font-size: 10px;">ctrip</a> <a href="/tags/data/" style="font-size: 10px;">data</a> <a href="/tags/data-analysis/" style="font-size: 12.86px;">data analysis</a> <a href="/tags/database/" style="font-size: 11.43px;">database</a> <a href="/tags/debugging/" style="font-size: 11.43px;">debugging</a> <a href="/tags/deep-learning/" style="font-size: 10px;">deep learning</a> <a href="/tags/deeplearn/" style="font-size: 11.43px;">deeplearn</a> <a href="/tags/design/" style="font-size: 11.43px;">design</a> <a href="/tags/dev/" style="font-size: 10px;">dev</a> <a href="/tags/dex/" style="font-size: 10px;">dex</a> <a href="/tags/diary/" style="font-size: 11.43px;">diary</a> <a href="/tags/dubbo/" style="font-size: 10px;">dubbo</a> <a href="/tags/event/" style="font-size: 10px;">event</a> <a href="/tags/fastboot/" style="font-size: 10px;">fastboot</a> <a href="/tags/fastlane/" style="font-size: 10px;">fastlane</a> <a href="/tags/fix/" style="font-size: 10px;">fix</a> <a href="/tags/flockdb/" style="font-size: 10px;">flockdb</a> <a href="/tags/fragment/" style="font-size: 10px;">fragment</a> <a href="/tags/frontend/" style="font-size: 10px;">frontend</a> <a href="/tags/gettingstart/" style="font-size: 20px;">gettingstart</a> <a href="/tags/gradle/" style="font-size: 10px;">gradle</a> <a href="/tags/graph/" style="font-size: 10px;">graph</a> <a href="/tags/graphics/" style="font-size: 11.43px;">graphics</a> <a href="/tags/hacking/" style="font-size: 11.43px;">hacking</a> <a href="/tags/handler/" style="font-size: 10px;">handler</a> <a href="/tags/high-concurrency/" style="font-size: 12.86px;">high concurrency</a> <a href="/tags/hot-fix/" style="font-size: 10px;">hot fix</a> <a href="/tags/hotfix/" style="font-size: 10px;">hotfix</a> <a href="/tags/https/" style="font-size: 10px;">https</a> <a href="/tags/ibinder/" style="font-size: 11.43px;">ibinder</a> <a href="/tags/inaction/" style="font-size: 10px;">inaction</a> <a href="/tags/infinitegraph/" style="font-size: 10px;">infinitegraph</a> <a href="/tags/javascript/" style="font-size: 11.43px;">javascript</a> <a href="/tags/jmlr/" style="font-size: 10px;">jmlr</a> <a href="/tags/kernel/" style="font-size: 10px;">kernel</a> <a href="/tags/kylin/" style="font-size: 10px;">kylin</a> <a href="/tags/layout/" style="font-size: 10px;">layout</a> <a href="/tags/learning/" style="font-size: 11.43px;">learning</a> <a href="/tags/library/" style="font-size: 10px;">library</a> <a href="/tags/life/" style="font-size: 11.43px;">life</a> <a href="/tags/linux/" style="font-size: 12.86px;">linux</a> <a href="/tags/live/" style="font-size: 11.43px;">live</a> <a href="/tags/local/" style="font-size: 10px;">local</a> <a href="/tags/looper/" style="font-size: 10px;">looper</a> <a href="/tags/machine-learning/" style="font-size: 15.71px;">machine learning</a> <a href="/tags/maven/" style="font-size: 11.43px;">maven</a> <a href="/tags/message/" style="font-size: 10px;">message</a> <a href="/tags/ml/" style="font-size: 11.43px;">ml</a> <a href="/tags/mobile/" style="font-size: 11.43px;">mobile</a> <a href="/tags/mood/" style="font-size: 11.43px;">mood</a> <a href="/tags/multi-classification/" style="font-size: 10px;">multi-classification</a> <a href="/tags/multi-dimensional/" style="font-size: 10px;">multi-dimensional</a> <a href="/tags/multidex/" style="font-size: 10px;">multidex</a> <a href="/tags/mvc/" style="font-size: 15.71px;">mvc</a> <a href="/tags/neo4j/" style="font-size: 10px;">neo4j</a> <a href="/tags/net/" style="font-size: 18.57px;">net</a> <a href="/tags/netty/" style="font-size: 15.71px;">netty</a> <a href="/tags/network/" style="font-size: 10px;">network</a> <a href="/tags/nio/" style="font-size: 10px;">nio</a> <a href="/tags/nuomi/" style="font-size: 10px;">nuomi</a> <a href="/tags/nuwa/" style="font-size: 10px;">nuwa</a> <a href="/tags/optimization/" style="font-size: 10px;">optimization</a> <a href="/tags/performance/" style="font-size: 10px;">performance</a> <a href="/tags/permission/" style="font-size: 10px;">permission</a> <a href="/tags/platform/" style="font-size: 14.29px;">platform</a> <a href="/tags/plugin/" style="font-size: 10px;">plugin</a> <a href="/tags/process/" style="font-size: 10px;">process</a> <a href="/tags/production/" style="font-size: 10px;">production</a> <a href="/tags/protection/" style="font-size: 10px;">protection</a> <a href="/tags/queue/" style="font-size: 10px;">queue</a> <a href="/tags/react-native/" style="font-size: 10px;">react native</a> <a href="/tags/recovery/" style="font-size: 10px;">recovery</a> <a href="/tags/remote/" style="font-size: 10px;">remote</a> <a href="/tags/request/" style="font-size: 11.43px;">request</a> <a href="/tags/responsive/" style="font-size: 10px;">responsive</a> <a href="/tags/restful/" style="font-size: 15.71px;">restful</a> <a href="/tags/retrofit/" style="font-size: 11.43px;">retrofit</a> <a href="/tags/reversing/" style="font-size: 11.43px;">reversing</a> <a href="/tags/rom/" style="font-size: 10px;">rom</a> <a href="/tags/safe-mode/" style="font-size: 10px;">safe mode</a> <a href="/tags/scroller/" style="font-size: 11.43px;">scroller</a> <a href="/tags/secure/" style="font-size: 11.43px;">secure</a> <a href="/tags/security/" style="font-size: 10px;">security</a> <a href="/tags/service/" style="font-size: 11.43px;">service</a> <a href="/tags/shell/" style="font-size: 11.43px;">shell</a> <a href="/tags/sklearn/" style="font-size: 11.43px;">sklearn</a> <a href="/tags/sourcecode/" style="font-size: 10px;">sourcecode</a> <a href="/tags/spring/" style="font-size: 18.57px;">spring</a> <a href="/tags/springboot/" style="font-size: 10px;">springboot</a> <a href="/tags/springframework/" style="font-size: 18.57px;">springframework</a> <a href="/tags/statusbar/" style="font-size: 10px;">statusbar</a> <a href="/tags/support-vector-machine/" style="font-size: 12.86px;">support vector machine</a> <a href="/tags/svd/" style="font-size: 10px;">svd</a> <a href="/tags/svm/" style="font-size: 12.86px;">svm</a> <a href="/tags/tcp-ip/" style="font-size: 10px;">tcp/ip</a> <a href="/tags/tech/" style="font-size: 10px;">tech</a> <a href="/tags/tensorflow/" style="font-size: 12.86px;">tensorflow</a> <a href="/tags/testing/" style="font-size: 10px;">testing</a> <a href="/tags/title-bar/" style="font-size: 10px;">title bar</a> <a href="/tags/tmall/" style="font-size: 10px;">tmall</a> <a href="/tags/touch/" style="font-size: 10px;">touch</a> <a href="/tags/update/" style="font-size: 10px;">update</a> <a href="/tags/view/" style="font-size: 10px;">view</a> <a href="/tags/viewpager/" style="font-size: 10px;">viewpager</a> <a href="/tags/webview/" style="font-size: 11.43px;">webview</a> <a href="/tags/window/" style="font-size: 10px;">window</a> <a href="/tags/writeup/" style="font-size: 11.43px;">writeup</a> <a href="/tags/zookeeper/" style="font-size: 10px;">zookeeper</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">February 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">April 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">March 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">January 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12/">December 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/10/">October 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/09/">September 2013</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/04/10/ml/AdaptationBasedonGeneralizedDiscrepancy/">Adaptation Based on Generalized Discrepancy</a>
          </li>
        
          <li>
            <a href="/2017/05/04/security/analysisofpermissionaccessinglocalfileleakedfromwebview/">Analysis of Permission Accessing local file Leaked from Android WebView</a>
          </li>
        
          <li>
            <a href="/2016/11/02/mathalg/matrixcompletionandlowranksvdviafastalternatingleastsquares/">Matrix Completion and Low-Rank SVD via Fast Alternating Least Squares (JMLR)</a>
          </li>
        
          <li>
            <a href="/2016/08/15/android/startproectedontmall/">The final rescue plan - safe mode</a>
          </li>
        
          <li>
            <a href="/2016/06/20/android/SummaryofAndroidsoftwareprotection/">Summary of Android software protection measures</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 dachmx<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo and dachmx</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>